

# 集合

## 集合概述

集合和数组都是容器。



数组的特点：

- 数组定义完成并启动后，类型确定，长度固定。
- 进行增删操作的时候，数组是不太合适的，增删数据都需要放弃原有的数组或者位移。



集合是Java中存储对象数据的一种容器

集合的特点：

- 集合大小不固定，启动后可以动态变化，类型也可以选择不固定。集合更想一个气球。
- 集合非常时候做元素增删操作。
- 注意：集合只能存储引用类型的数据，如果要存储基本数据类型的数据可以选用包装类。





## Collection集合的体系特点

### 集合类体系结构

集合分为Collection（单列）和Map（双列）

- Collection单例集合，每个元素（数据）只包含一个值
- Map双列集合，每个元素包含两个值（键值对：key : value）

首先我们先了解单列集合

### Collection集合体系

Collection集合是一个接口，是单列集合的祖宗类。

Collection又分了一个List接口和Set接口。

List下有ArrayList和LinkedList两个常用的实现类。

Set下有HashSet和TreeSet常用实现类。

HashSet下有LinkedHashSet实现类。

![](https://gitee.com/xiaohugitee/tuchuang/raw/master/202203021313061.png)

#### Collection集合的特点

##### List系列集合：添加元素是有序的、可重复的、有索引。

- ArrayList、LinkedList：有序、可重复、有索引

##### Set系列集合：添加元素是无序的、不重复、无索引。

- HashSet：无序、不重复、无索引；LinkedHashSet：有序、不重复、无索引

  ```java
  package com.meng.collection;
  
  import java.util.ArrayList;
  import java.util.Arrays;
  import java.util.Collection;
  import java.util.HashSet;
  
  /**
   * 明确Collection集合体系的特点
   */
  public class CollectionDemo1 {
      public static void main(String[] args) {
          //List 有序、可重复、有索引
          Collection list = new ArrayList();
          list.add("java");
          list.add(123);
          list.add(true);
          list.add("java");
          list.add(123);
          list.add(true);
          System.out.print("List:");//有序、可重复、有索引 :[java, 123, true, java, 123, true]
          System.out.println(list);//可以直接打印出内容，说明重写了toString方法
          //Object[] array = list.toArray(); toArray方法可以把集合转换成数组
          //System.out.println(Arrays.toString(array));  调用Arrays类的toString方法快速打印出数组
  
          //Set 无序 不重复 无索引
          Collection hashSet = new HashSet();
          hashSet.add("java");
          hashSet.add(123);
          hashSet.add(true);
          hashSet.add("java");
          hashSet.add(123);
          hashSet.add(true);
          System.out.print("Set:");
          System.out.println(hashSet);// 无序、不重复、无索引：[java, 123, true]
  
  
      }
  }
  
  ```

#### 集合对泛型的支持

集合都是支持泛型的，所谓泛型就是类，八种基本数据类型必须用他们的包装类（例如Integer，Double，Boolean...)，集合添加泛型可以在编译阶段约束集合只能操作某种数据类型。

```java
package com.meng.collection;

import java.util.ArrayList;
import java.util.Collection;
import java.util.HashSet;

/**
 * 明确Collection集合体系的特点
 */
public class CollectionDemo1 {
    public static void main(String[] args) {
        //List 有序、可重复、有索引
        Collection list = new ArrayList();
        list.add("java");
        list.add(123);
        list.add(true);
        list.add("java");
        list.add(123);
        list.add(true);
        System.out.print("List:");//有序、可重复、有索引 :[java, 123, true, java, 123, true]
        System.out.println(list);//可以直接打印出内容，说明重写了toString方法
        //Object[] array = list.toArray(); toArray方法可以把集合转换成数组
        //System.out.println(Arrays.toString(array));  调用Arrays类的toString方法快速打印出数组

        //Set 无序 不重复 无索引
        Collection hashSet = new HashSet();
        hashSet.add("java");
        hashSet.add(123);
        hashSet.add(true);
        hashSet.add("java");
        hashSet.add(123);
        hashSet.add(true);
        System.out.print("Set:");
        System.out.println(hashSet);// 无序、不重复、无索引：[java, 123, true]

        System.out.println("----------分割线-----------");
        //集合对泛型的支持,不支持基本数据类型
        Collection<String> list1 = new ArrayList<>();
        list1.add("java");
//        list1.add(1);编译阶段报错

        Collection<Integer> integers = new ArrayList<>();
        integers.add(23);//这个时候23会自动装箱成为Integer对象
        System.out.println(integers);



    }
}

```



## Conllection API

Collection是单列集合的祖宗接口，它的功能是全部单列集合都可以继承使用。

#### Collection API :

| 方法名                            |                                  |
| --------------------------------- | -------------------------------- |
| public boolean add(E e)           | 把给定的对象添加到当前集合中     |
| public void clear()               | 清空当前集合中的所有元素         |
| public boolean remove(E e)        | 把给定的对象在当前集合中删除     |
| public boolean contains(Object o) | 判断当前集合中是否包含给定的对象 |
| public boolean isEmpty()          | 判断当前集合是否为空             |
| public int size()                 | 返回集合中的元素个数             |
| public Objetc[] toArray()         | 把集合中的元素，存储到数组中     |

```java
package com.meng.collection;

import com.sun.istack.internal.NotNull;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;

public class CollectionDemo2 {
    public static void main(String[] args) {
        //多态，list调用的都是左边Collection中的方法
        Collection<String> list = new ArrayList<>();
        //1、添加元素
        list.add("Java");
        list.add("MySQL");
        list.add("Spring");
        list.add("Java");
        System.out.println(list);
        //2、清空元素
        //list.clear();清空所以的元素
        //3、判断集合是否为空，是空返回true，反之false
        System.out.println(list.isEmpty());//false
        //4、获取元素大小
        System.out.println(list.size());
        //5、判断集合中是否包含某个元素
        System.out.println(list.contains("Java"));
        System.out.println(list.contains("java"));//false 精确匹配
        //6、删除某个元素，如果有多个重复的元素，会默认删除第一个
        System.out.println(list.remove("java"));//false
        System.out.println(list);
        System.out.println(list.remove("Java"));//true
        System.out.println(list);
        //7、把集合转换为数组 这里转换为Object是因为，以后有一种技术可以强行向String的集合中添加其他的元素，所以转成了Object
        Object[] array = list.toArray();
        System.out.println(Arrays.toString(array));

        System.out.println("-------------拓展-----------");

        Collection<String> list2 = new ArrayList<>();
        list2.add("HTML");
        list2.add("CSS");
        list2.add("JS");
        list2.add("vue");

        list.addAll(list2);//把list2中的元素拷贝到list中
        System.out.println(list);


    }
}

```



## Collection集合常用的遍历

#### 迭代器遍历概述

遍历就是一个一个的把容器中的元素访问一遍。

迭代器在java中的代表是iterator，迭代器是集合专用的遍历方式

```java
package com.meng.collection;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collection;
import java.util.Iterator;

public class CollectionDemo3 {
    public static void main(String[] args) {
        //多态，list调用的都是左边Collection中的方法
        Collection<String> list = new ArrayList<>();
        //1、添加元素
        list.add("Java");
        list.add("MySQL");
        list.add("Spring");
        list.add("Java");
        System.out.println(list);

        //得到当前集合的迭代器对象
        Iterator<String> iterator = list.iterator();//定义这个的时候就会得到一个该集合的迭代器，在第一个位置！！！
//        System.out.println(iterator.next());//遍历第一个元素，选取元素后移位
//        System.out.println(iterator.next());//遍历第一个元素，选取元素后移位
//        System.out.println(iterator.next());//遍历第一个元素，选取元素后移位
//        System.out.println(iterator.next());//遍历第一个元素，选取元素后移位
//        System.out.println(iterator.next());//出现无此元素异常，越界！！

        //定义while循环
        while (iterator.hasNext()){//hasNext 问一问iterator里面该位置也没有元素，有元素就返回true并且移到下一个元素，反之false
            System.out.println(iterator.next());
        }


    }
}

```

迭代器的默认位置在第一个元素的位置（当前集合索引为0）

如果迭代器越界了会出现NoSuchElementException异常



#### foreach/增强for循环

增强for循环：既可以遍历集合也可以遍历数组

它是JDK5之后出现的，其内部原来是一个iterator迭代器，遍历集合相当于是迭代器的简化写法

实现iterator接口的类才可以使用迭代器和增强for，Collection接口已经实现了iterator接口

格式：

for(元素数据类型 变量名 : 数组或Collection集合){

​		//在此处使用变量名就是该元素

}

```java
package com.meng.collection;

import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;

public class CollectionDemo4 {
    public static void main(String[] args) {
        //多态，list调用的都是左边Collection中的方法
        Collection<String> list = new ArrayList<>();
        //1、添加元素
        list.add("Java");
        list.add("MySQL");
        list.add("Spring");
        list.add("Java");
        System.out.println(list);

        //foreach
        for (String s : list) {
            System.out.println(s);
        }

        System.out.println("----------------");

        double[] scores = {100,99,59.5};
        for (double score : scores) {
            System.out.println(score);
        }
    }
}

```



#### Lambda 表达式



```java
package com.meng.collection;

import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.Collection;
import java.util.function.Consumer;

public class CollectionDemo5 {
    public static void main(String[] args) {
        //多态，list调用的都是左边Collection中的方法
        Collection<String> list = new ArrayList<>();
        //1、添加元素
        list.add("Java");
        list.add("MySQL");
        list.add("Spring");
        list.add("Java");
        System.out.println(list);

        //forEach
        list.forEach(new Consumer<String>() {
            @Override
            public void accept(String s) {
                System.out.println(s);
            }
        });

        //简化
        list.forEach(s -> {
            System.out.println(s);
        });
        //更简化
        list.forEach(System.out::println);




    }
}

```



## Collection集合存储自定义类型的对象

```java
package com.meng.collection;

import java.util.ArrayList;
import java.util.Collection;

public class CollectionDemo6 {
    public static void main(String[] args) {
        //定义一个电影类
        //定义一个集合对象存储电影
        Collection<Movie> movies = new ArrayList<>();
        movies.add(new Movie("唐人街探案1",9.8,"王宝强，刘昊然"));
        movies.add(new Movie("唐人街探案2",9.8,"王宝强，刘昊然"));
        movies.add(new Movie("唐人街探案3",9.8,"王宝强，刘昊然"));

        //遍历集合中的每一个元素
        for (Movie movie : movies) {
            System.out.println(movie);
        }
    }
}

```

注意：**集合中存储的是对象的地址**。

## 常见数据结构

- 数据结构概述、栈、队列
- 数组
- 链表
- 二叉树、二叉查找树
- 平衡二叉树
- 红黑树

### 数据结构概述

数据结构是计算机底层存储、组织数据的方式。是指数据相互之间是以什么方式排列在一起的。

通常情况下，精心选择的数据结构可以带来更高的运行或存储效率

### 栈

栈的特点：后进先出，先进后出（薯片桶类型的）

数据进入栈称为：进栈

数据离开栈称为：出栈

应用：游戏中手枪弹夹中的子弹威力的大小（例如第一枪可以打多少血量，第二枪打多少血量...）

### 队列

队列的特点：先进先出，后进后出（排队）

数据从后端进入队列称为：入队列

数据从前端离开队列称为：出队列

应用：医院或餐厅叫号系统

### 数组

特点：内存中的一段连续空间、查询速度快（根据索引） 、删除效率低（删除数据后，再把后面的数据一个一个移过来）、增加效率极低

### 链表

链表中的元素是在内存中不连续存储的，每个元素结点包含数据值和下一个元素的地址。

链表查询慢，无论查询哪个数据都要从头开始找。

增删比较快，只需要把链（数据指向的下一个的地址）给改一改就行了

单链表：只能向后查找

双链表：向前向后都可以查找

![](https://gitee.com/xiaohugitee/tuchuang/raw/master/202203031451886.png)

### 二叉树，二叉查找树

二叉树：就是包含一个父节点，一个父节点产生一个左节点和右节点，每个结点最多有两个结点。

二叉查找树：又称为二叉排序树或者二叉搜索树

![](https://gitee.com/xiaohugitee/tuchuang/raw/master/202203031459401.png)

### 平衡二叉树

优化二叉树可能出现的瘸子现象（一边非常长，一边很短）

平衡二叉树是在满足查找的二叉树的大小规则下，让树尽可能矮小，以此提高查找数据的性能。

平衡二叉树在添加元素后导致不平衡后：基本策略是进行左旋或者右旋，保证平衡。

推荐观看黑马视频解析：https://www.bilibili.com/video/BV1Cv411372m?p=130&t=1826.1

### 红黑树

基于红黑规则实现了自平衡的排序二叉树

#### 红黑树概述

红黑树是一种自平衡的二叉树，是计算机科学中用到的一种数据结构。

1972年出现，当时被称为平衡二叉B树。1978年被修改为如今的”红黑树“

每一个结点可以是红或黑；红黑树不是通过高度平衡的，他的平衡是通过红黑规则进行实现的。

#### 红黑规则

每一个节点或是红色的，或是黑色的，**根节点必须是黑色的**

如果一个节点没有子节点或者父节点，则该节点对应节点相应的指针属性值为Nill,这些Nill视为叶节点，叶节点是黑色的。

如果某一个节点是红色的，那么它的子节点必须是黑色的（不能出现两个红色的节点相连的情况）

**对每一个节点，从该节点到其所有后代叶节点的简单路径上，均包含相同数目的黑色节点。**

**红黑树增删查改的性能都很好**



## List系列集合

### List集合特点：

- ArrayList、LinkedList：有序、可重复、有索引
- 有序：存储和去除的元素顺序一致
- 有索引：可通过索引操作元素
- 可重复：存储的元素可以重复

### List集合特有的方法

List集合因为支持索引，所以多了很多索引操作的独特api，其他Collection的功能List也继承了。

| 方法名                        | 说明                                   |
| ----------------------------- | -------------------------------------- |
| void add(int index,E element) | 在此集合中的指定位置插入指定元素       |
| E remove(int index)           | 删除指定索引处的元素，返回被删除的元素 |
| E set(int index,E element)    | 修改指定索引处的元素，返回被修改的元素 |
| E get(int index)              | 返回指定索引处的元素                   |

```java
package com.meng.list;

import java.util.ArrayList;
import java.util.List;

public class ListDemo1 {
    public static void main(String[] args) {
        //创建一个ArrayList集合对象
        //List：有序、可重复、有索引
        List<String> list = new ArrayList<>();//多态写法，经典
        list.add("Java");
        list.add("Java");
        list.add("MySQL");
        list.add("MySQL");

        //插入数据
        list.add(2,"HTML");
        System.out.println(list);//[Java, Java, HTML, MySQL, MySQL]

        //根据索引删除元素
        System.out.println(list.remove(2));
        System.out.println(list);

        //根据索引取元素
        System.out.println(list.get(2));

        //根据索引修改元素，返回修改前的数据
        System.out.println("被修改的数据"+list.set(0, "JavaSE"));
        System.out.println(list);
    }
}

```

List的实现类底层原理

- ArrayList底层是基于数组实现的，根据查询元素块，增删元素相对慢。
- LinkedList底层是基于双链表实现的，查询元素慢，增删首位元素是非常快的。



### List集合的遍历方式

- 迭代器
- 增强for循环
- Lambda表达式
- for循环（因为List集合存在索引，Collection不存在索引不能使用for循环）

### ArrayList集合底层原理（面试热点）

- ArrayList底层是基于**数组**实现的：根据索引定位元素快，增删需要做元素位移操作。
- 第一次创建集合并添加第一个元素的时候，在底层创建一个默认长度为10的数组。

